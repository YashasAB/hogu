
modules = ["nodejs-20"]

run = "npm run dev"

[nix]
channel = "stable-25_05"

[deployment]
build = ["bash", "-lc", "npm ci && cd apps/api && npm ci && npm run build && npx prisma migrate deploy"]
run = ["bash", "-lc", "cd apps/api && PORT=$PORT NODE_ENV=production node dist/index.js"]

[workflows]
runButton = "Development"

[[workflows.workflow]]
name = "Development"
author = 45771689
mode = "parallel"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "npm run dev"

[objectStorage]
defaultBucketID = "replit-objstore-5d4a1c81-2e13-484c-92e0-96c3c7f4803f"
